<!doctype html>
<html lang="en">
<head>
    <script type="text/javascript">
    function spremembaDrsnika(val) {
    document.getElementById('vrednostDrsnika').innerHTML = val;
    }

    </script>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">-->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
    <link href="/static/style.css" rel="stylesheet">
    <link rel="shortcut icon" type="image/png" href="/static/favicon.png">
    <title>{{naslov}}</title>


</head>
<!--<body  background="/static/ozadje.jpg">-->
<body>

%if uporabnik[2] == "Hufflepuff":
%barva = "bg-warning"
%grb = "/static/Hufflepuff_Crest.png"
%elif uporabnik[2] == "Ravenclaw":
%barva = "bg-primary"
%grb = "/static/Ravenclaw_Crest.png"
%elif uporabnik[2] == "Slytherin":
%barva = "bg-success"
%grb = "/static/Slytherin_Crest.png"
%elif uporabnik[2] == "Gryffindor":
%barva = "bg-danger"
%grb = "/static/Gryffindor_Crest.png"
%else:
%barva = "bg-dark"
%grb = "/static/bradavicarka_logo.png"
%end


<!-- grb, slika in menu bar-->
<div class="container-fluid {{barva}}">
    <div class="row">
        <div class="col-3">
            <a href="/">
                <img src={{grb}} class="center-medium" align="center" alt="Crest"/>
            </a>
        </div>
        <div class="col-6">
            <img src="/static/harry_knjiznica.jpg" class="center-full" align="center" alt="Library"/>
        </div>
        <div class="col-3">

        </div>
    </div>
</div>
<div class="container-fluid bg-dark">
    <div class="row align-items-center">
        <div class="col-3">
            <nav class="nav">
                <a class="nav-link active" href="#">
                    <form action="/all_authors" method="POST">
                        <b><input type="submit" class="btn btn-basic" value="Authors"></b>
                    </form>
                </a>
                <a class="nav-link" href="#">
                    <form action="/all_genres" method="POST">
                        <b><input type="submit" class="btn btn-basic" value="Genres"></b>
                    </form>
                </a>

            </nav>

        </div>
            %if uporabnik[1] is None:
        <div class="col-8">
            <form class="form-row justify-content-end" action="/sign_in" method="POST">
                <!--<div class="w-75 p-3 bg-dark">-->
                    <div class="col-3">
                        <input type="text" class="form-control" id="username" placeholder="Username" name="vzdevek">
                    </div>

                    <div class="col-3">
                        <input type="password" class="form-control" id="inputPassword" placeholder="Password"
                               name="geslo">
                    </div>
                <div class="col-1">
                    <input type="submit" class="btn btn-basic btn-sm" value="Sign in">
                </div>
                <!--</div>-->
            </form>
        </div>
        <div class="col-1">
            <form class="form-row" action="/sign_up" method="GET">
                <div class="col-auto">
                    <b><input type="submit" class="btn btn-success btn-sm" value="Sign up"></b>
                </div>
            </form>
        </div>
            %else:
        <div class="col-8">
            <div class="container text-right">
            Welcome, <a class="{{uporabnik[2]}}" href="/profile/{{uporabnik[0]}}">{{uporabnik[1]}}!</a>
            </div>
        </div>
        <div class="col-1">
            <form action="/sign_out" method="GET">
                <div class="col-auto">
                    <b><input type="submit" class="btn btn-success btn-sm" value="Sign out"></b>
                </div>
            </form>
        </div>
            %end
    </div>
</div>

<!-- Iskalniki -->
% if 'iskane_dolzine' not in globals():
%   iskane_dolzine = 200
% end
% if 'iskane_kljucne' not in globals():
%   iskane_kljucne = []
% end
% if 'iskani_zanri' not in globals():
%   iskani_zanri = []
% end
% if 'iskano_zbirka' not in globals():
%   iskano_zbirka = 'Either way'
% end
% if 'iskani_izraz_knjiga' not in globals():
%   iskani_izraz_knjiga = None
% end
% if 'iskani_izraz_avtor' not in globals():
%   iskani_izraz_avtor = None
% end


<div class="container-fluid">
    <div class="row">
        <div class="col-3  bg-secondary">
            <br/>
            <div class="row px-3">
                <!-- Veliki iskalnik -->
                <form action="/search/" method="POST">
                <p class="text-primary"><b>Bookfinder</b></p>

                <div class="form-group">
                    <div class="slidecontainer">
                        <input type="range" min="0" max="1000" value="{{iskane_dolzine}}" class="slider" id="drsnikDolzina"
                               name="dolzinaInput" onchange="spremembaDrsnika(this.value)">
                        <br/>
                        The book should have at least <span id="vrednostDrsnika">{{iskane_dolzine}}</span> pages.
                    </div>
                </div>
                <p>
                    <button class="btn btn-primary" type="button" data-toggle="collapse"
                            data-target="#skupineKljucnihBesed"
                            aria-expanded="true" aria-controls="skupineKljucnihBesed">
                        Key words
                    </button>
                </p>

                <div class="collapse" id="skupineKljucnihBesed">
                    <div class="card card-body">
                        %for (skupina, besede) in vseKljucne.items():
                        <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#{{skupina}}"
                                aria-expanded="true" aria-controls="{{skupina}}">
                            {{skupina}}
                        </button>
                        <div id="{{skupina}}" class="collapse">
                            <div class="card card-body">
                                <div class="form-group">
                                    %for beseda in besede:
                                    <div class="form-check">
                                        %if beseda in iskane_kljucne:
                                            <input class="form-check-input" type="checkbox" value="{{beseda}}" id="{{beseda}}1" name="kljucne_besede" checked>
                                             <label class="form-check-label" for="{{beseda}}1">
                                                {{beseda}}
                                            </label>
                                        %else:
                                            <input class="form-check-input" type="checkbox" value="{{beseda}}" id="{{beseda}}2" name="kljucne_besede">
                                            <label class="form-check-label" for="{{beseda}}2">
                                                {{beseda}}
                                            </label>
                                        %end
                                    </div>
                                    %end
                                </div>
                            </div>
                        </div>
                        %end
                    </div>

                </div>

                <p>
                    <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#zanri"
                            aria-expanded="true" aria-controls="zanri">
                        Genres
                    </button>
                </p>
                <div class="collapse" id="zanri">
                    <div class="card card-body">
                        <div class="form-group">
                            %for zanr in zanri:
                            <div class="form-check">
                                %if zanr in iskani_zanri:
                                    <input class="form-check-input" type="checkbox" value="{{zanr}}" id="{{zanr}}1" name="zanri" checked>
                                    <label class="form-check-label" for="{{zanr}}1">
                                        {{zanr}}
                                    </label>
                                %else:
                                    <input class="form-check-input" type="checkbox" value="{{zanr}}" id="{{zanr}}2" name="zanri">
                                    <label class="form-check-label" for="{{zanr}}2">
                                        {{zanr}}
                                    </label>
                                %end

                            </div>
                            %end
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="zbirka">Part of series</label>

                    <select id="zbirka" class="form-control" name="zbirka" required>
                        % if iskano_zbirka != 'Either way':
                        <option>Either way</option>
                        %else:
                        <option selected>Either way</option>
                        %end
                        % if iskano_zbirka != 'Yes':
                        <option>Yes</option>
                        %else:
                        <option selected>Yes</option>
                        %end
                         % if iskano_zbirka != 'No':
                        <option>No</option>
                        %else:
                        <option selected>No</option>
                        %end
                    </select>
                </div>

                <p><input type="submit" class="btn btn-success" value="Find books"></p>
            </form>
            </div>
            <!-- Mala iskalnika -->
            <div class="row">
                <nav class="nav">
                 <a class="nav-link" href="#">
                    <form class="form-inline my-2 my-lg-0" action="/search_results_books/" method="POST">
                        % if iskani_izraz_knjiga is not None:
                        <input class="form-control mr-sm-2" type="search" placeholder="Search books" aria-label="Search"
                               id="splosniIskalnikKnjig1" name="iskaniIzrazKnjige" value="{{iskani_izraz_knjiga}}">
                        % else:
                        <input class="form-control mr-sm-2" type="search" placeholder="Search books" aria-label="Search"
                               id="splosniIskalnikKnjig2" name="iskaniIzrazKnjige">
                        %end
                        <button class="btn btn-success" type="submit">Search</button>
                    </form>
                </a>
                </nav>
            </div>

            <div class="row">
                <nav class="nav">
                 <a class="nav-link" href="#">
                    <form class="form-inline my-2 my-lg-0" action="/search_results_authors/" method="POST">
                        % if iskani_izraz_avtor is not None:
                            <input class="form-control mr-sm-2" type="search" placeholder="Search authors"
                                   aria-label="Search" id="splosniIskalnikAvtorjev1" name="iskaniIzrazAvtorji" value="{{iskani_izraz_avtor}}">
                        %else:
                            <input class="form-control mr-sm-2" type="search" placeholder="Search authors"
                                   aria-label="Search" id="splosniIskalnikAvtorjev2" name="iskaniIzrazAvtorji">
                        %end
                        <button class="btn btn-success" type="submit">Search</button>
                    </form>
                </a>
                </nav>
            </div>

        </div>

        <div class="col-9">
            <br/>
            {{!base}}
        </div>
    </div>
</div>


<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
        integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"
        integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T"
        crossorigin="anonymous"></script>

</body>
</html>