%rebase('osnova.html', naslov='Izpis knjig')

<div class="row px-4">
    <!--%if len(knjige)%100 == 1:-->
    <!--ustreza {{len(knjige)}} knjiga.-->
    <!--%elif len(knjige)%100 == 2:-->
    <!--ustrezata {{len(knjige)}} knjigi.-->
    <!--%elif len(knjige)%100 in {3,4}:-->
    <!--ustrezajo {{len(knjige)}} knjige.-->
    <!--%else:-->
    <!--ustreza {{len(knjige)}} knjig.-->
    <!--%end-->
    %if len(knjige)%100 == 1:
    {{len(knjige)}} book matches
    %elif len(knjige)%100 > 2:
    {{len(knjige)}} books match
    %end
    your search.
    <br/>
    % if parametri is not None and parametri != []:
        % for parameter in parametri[:-1]:
            {{parameter}},
        %end
        {{parametri[-1]}}
    %end
    <br/>

</div>
% if len(knjige) > 10:
    <nav aria-label="Page navigation example">
        <ul class="pagination">
            %if stran != 1:
                <li class="page-item">
                    <form action="/izpis_zadetkov/knjiga&{{int(stran)-1}}&{{idji}}" method="GET">
                        <p><input type="submit" class="btn btn-link" value="<<">
                        </p>
                    </form>
                </li>
            %end
            %zadnja = len(knjige)//10
            %if len(knjige)% 10 != 0:
            %    zadnja += 1
            %end
            %zacetna = max(1, int(stran) - 4)
            %koncna = min(int(stran) + 5, zadnja +1)
            %for i in range(zacetna, koncna):
                <li class="page-item">
                    <form action="/izpis_zadetkov/knjiga&{{str(i)}}&{{idji}}" method="GET">
                        <input type="submit" class="btn btn-link" value="{{i}}">
                    </form>
                </li>
            %end
            %if koncna < zadnja:
                <li class="page-item">
                    ...
                </li>
                <li class="page-item">
                    <form action="/izpis_zadetkov/knjiga&{{zadnja}}&{{idji}}" method="GET">
                        <input type="submit" class="btn btn-link" value="{{zadnja}}">
                    </form>
                </li>
            %end
            %if int(stran)*10 < len(knjige):
                <li class="page-item">
                    <form action="/izpis_zadetkov/knjiga&{{int(stran)+1}}&{{idji}}" method="GET">
                        <p><input type="submit" class="btn btn-link" value=">>">
                        </p>
                    </form>
                </li>
            %end
        </ul>
    </nav>
%end

%for knjiga in knjige[(int(stran)-1)*10 : int(stran)*10]:
    <div class="row px-4">
        <div class="col-2">
            <img src="{{knjiga['url_naslovnice']}}" align="center" class="img-thumbnail"/>
        </div>
        <div class="col">
            <div class="btn-group-vertical">
            <!--<br/>-->
                <form action="/knjiga/{{knjiga['id']}}" method="POST">
                    <b><input type="submit" class="btn btn-basic" value="{{knjiga['naslov']}}"></b>

                </form>
                %if knjiga['avtorji']!={None}:
                    %if len(knjiga['avtorji'])==1:
                        Avtor:
                    %end
                    %if len(knjiga['avtorji'])>1:
                        Avtorji:
                    %end
                    %for avtor in knjiga['avtorji']:
                        <form action="/avtor/{{avtor[0]}}" method="POST">
                             <p><input type="submit" class="btn btn-link" value="{{avtor[1]}}">
                            </p>
                        </form>
                    %end
                %end
                %if knjiga['zanri']!={None}:
                    Å½anri:
                    <div class="btn-group">
                        %for zanr in knjiga['zanri']:
                            <form action="/zanr/{{zanr}}" method="POST">
                                <p><input type="submit" class="btn btn-link" value="{{zanr}}">
                                </p>
                            </form>

                        %end
                    </div>
                %end
            </div>
        </div>
    </div>
    <hr />
%end

% if len(knjige) > 10:
    <nav aria-label="Page navigation example">
        <ul class="pagination">
            %if stran != 1:
                <li class="page-item">
                    <form action="/izpis_zadetkov/knjiga&{{int(stran)-1}}&{{idji}}" method="GET">
                        <p><input type="submit" class="btn btn-link" value="<<">
                        </p>
                    </form>
                </li>
            %end
            %zadnja = len(knjige)//10
            %if len(knjige)% 10 != 0:
            %    zadnja += 1
            %end
            %zacetna = max(1, int(stran) - 4)
            %koncna = min(int(stran) + 5, zadnja +1)
            %for i in range(zacetna, koncna):
                <li class="page-item">
                    <form action="/izpis_zadetkov/knjiga&{{str(i)}}&{{idji}}" method="GET">
                        <input type="submit" class="btn btn-link" value="{{i}}">
                    </form>
                </li>
            %end
            %if koncna < zadnja:
                <li class="page-item">
                    ...
                </li>
                <li class="page-item">
                    <form action="/izpis_zadetkov/knjiga&{{zadnja}}&{{idji}}" method="GET">
                        <input type="submit" class="btn btn-link" value="{{zadnja}}">
                    </form>
                </li>
            %end
            %if int(stran)*10 < len(knjige):
                <li class="page-item">
                    <form action="/izpis_zadetkov/knjiga&{{int(stran)+1}}&{{idji}}" method="GET">
                        <p><input type="submit" class="btn btn-link" value=">>">
                        </p>
                    </form>
                </li>
            %end
        </ul>
    </nav>
%end