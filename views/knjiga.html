%rebase('osnova.html', naslov='Knjiga')

<div class="row pxy-4">

    <div class="col-7">
        <h3>{{knjiga['naslov']}}</h3>
    </br>
        Average rating: {{knjiga['povprecna_ocena']}} (Rating count: {{knjiga['stevilo_ocen']}})
    </div>
    %if uporabnik[1] is not None:
        %if prebrano and (ocena is None):
        Rate book:
        <div class="col-5">
            <form action="/knjiga/{{knjiga['id']}}" method="POST">
                <div class="rating-block">
                    %for i in range(1, 6):
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="ocena" id={{"ocena"+str(i)}} value={{str(i)}}>
                            <label class="form-check-label" for={{"ocena"+str(i)}}>{{i}}</label>
                        </div>
                    %end
                </div>
                <button class="btn btn-success" type="submit">Rate</button>
            </form>
        </div>
        %end

        %if prebrano and (ocena is not None):
            Your rating:
            <div class="col-5">
                <form action="/knjiga/{{knjiga['id']}}" method="POST">
                    <div class="rating-block">
                        %for i in range(1, ocena):
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="ocena" id={{"ocena1"+str(i)}} value={{str(i)}}>
                                <label class="form-check-label" for={{"ocena1"+str(i)}}>{{i}}</label>
                            </div>
                        %end
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="ocena" id={{"ocena"+str(ocena)}} value={{ocena}} checked="checked">
                            <label class="form-check-label" for={{"ocena"+str(ocena)}}>{{ocena}}</label>
                        </div>
                        %for i in range(ocena + 1, 6):
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="ocena" id={{"ocena2"+str(i)}} value={{str(i)}}>
                                <label class="form-check-label" for={{"ocena2"+str(i)}}>{{i}}</label>
                            </div>
                        %end
                    </div>
                    <button class="btn btn-success" type="submit">Change rating</button>
                </form>
            </div>
        %end

        %if not prebrano and zelja:
        <!--Dodaj gumb read in remove from Wishlist-->
        <div class="col-2">
            <form action="/remove_wishlist/{{knjiga['id']}}" method="POST">
                <b><input type="submit" class="btn btn-success btn-sm" value="Remove from wishlist"></b>
            </form>
        </div>
        <div class="col-3">
            <form action="/read/{{knjiga['id']}}" method="POST">
                <b><input type="submit" class="btn btn-success btn-sm" value="Read"></b>
            </form>

        </div>
        %end

        %if not prebrano and not zelja:
        <!--Dodaj gumb "preberi" in add to Wishlist-->
        <div class="col-2">
            <form action="/add_wishlist/{{knjiga['id']}}" method="POST">
                <b><input type="submit" class="btn btn-success btn-sm" value="Add to wishlist"></b>
            </form>
        </div>
        <div class="col-3">
            <form action="/read/{{knjiga['id']}}" method="POST">
                <b><input type="submit" class="btn btn-success btn-sm" value="Read"></b>
            </form>

        </div>
        %end
    %end
</div>

%if knjiga['avtor'] != {(None, None)}:
    <div class="row px-4">
        %if len(knjiga['avtor'])==1:
            Author:
        %end
        %if len(knjiga['avtor'])>1:
            Authors:
        %end
        %for avtor in knjiga['avtor']:
            <form action="/avtor/{{avtor[0]}}" method="POST">
                <p><input type="submit" class="btn btn-link" value="{{avtor[1]}}"></p>
            </form>
        %end
    </div>
%end

% if knjiga['serija'] != {(None, None, None)}:
    <div class="row px-4">
        Series:
        %for serija in knjiga['serija']:
            <form action="/zbirka/{{serija[0]}}" method="POST">
                %if serija[2] is not None:
                %    dodatek = ' #' + str(serija[2])
                %else:
                %    dodatek = ''
                %end
                <p><input type="submit" class="btn btn-link" value="{{serija[1]}}{{dodatek}}">
                </p>
            </form>
        %end
    </div>
% end

% if knjiga['opis'] is not None:
    <div class="row px-4">
        <div class="col-3">
            <img src="{{knjiga['url_naslovnice']}}" align="center" class="img-thumbnail"/>
        </div>

        <div class="col">
            <p>{{knjiga['opis']}}</p>
        </div>
    </div>
% end

<br/>
% if knjiga['dolzina'] is not None:
    <div class="row px-4">
        Pages: {{knjiga['dolzina']}}
    </div>
% end

% if knjiga['isbn'] is not None:
    <div class="row px-4">
        ISBN13: {{knjiga['isbn']}}
    </div>
%end

% if knjiga['leto'] is not None:
    <div class="row px-4">
        Published: {{knjiga['leto']}}
    </div>
% end
<br/>

% if knjiga['zanri'] != {None}:
    <div class="row px-4">
        Genre:
        %for zanr in knjiga['zanri']:
            <form action="/zanr/{{zanr}}" method="POST">
                <p><input type="submit" class="btn btn-link" value="{{zanr}}">
                </p>
            </form>
        %end
    </div>
%end

% if knjiga['kljucna_beseda'] != {None}:
    <div class="row px-4">
        Key words:
        %for kljucna_beseda in knjiga['kljucna_beseda']:
            <form action="/isci" method="POST">
                <p><input name="kljucne_besede" type="submit" class="btn btn-link" value="{{kljucna_beseda}}">
                </p>
            </form>
        %end
    </div>
% end
